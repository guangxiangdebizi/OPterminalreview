# 数据库第7章 - 关系数据库设计理论

> 整理自数据库期末复习PPT

---

## 7 第七章 关系数据库设计理论.pptx


### 幻灯片 1

数据库原理


### 幻灯片 2

第七章 关系数据库设计理论

7.1问题的提出——为什么要学习关系数据理论
7.2 基本概念
7.3 规范化
7.4 函数依赖的公理系统
7.5 模式分解


### 幻灯片 3

第五章 关系数据库设计理论

7.1问题的提出——为什么要学习关系数据理论
7.2 基本概念
7.3 规范化
7.4 函数依赖的公理系统
7.5 模式分解


### 幻灯片 4

第七章 关系数据库设计理论

7.1问题的提出——为什么要学习关系数据理论
7.2 基本概念
7.3 规范化
7.4 函数依赖的公理系统
7.5 模式分解


### 幻灯片 5

7.1 问题的提出
针对一个具体问题，应如何构造一个适合于它的数据模式，即应该构造几个关系，每个关系由哪些属性组成等。
问题——什么是一个好的数据库逻辑设计 

 数据库逻辑设计主要解决的问题：
 应该构造几个关系模式
 每个关系模式包括哪些属性

 数据库逻辑设计工具─关系数据库的规范化理论


### 幻灯片 6

7.1 问题的提出
例：描述电力设备存放管理的数据库：
WAE(仓库号，所在区域，区域主管，设备号，数量)
语义：
⒈一个区域有多个仓库，一个仓库只能属于一个区域；
⒉一个区域只有一个区域主管；
⒊一个仓库可以存放多种设备，每种设备可以存放在多个仓库中；
⒋每个仓库的每种设备都有一个库存数量。


### 幻灯片 7

7.1 问题的提出
例：描述电力设备存放管理的数据库数据库：
WAE(仓库号，所在区域，区域主管，设备号，数量)
语义：
⒈一个区域有多个仓库，一个仓库只能属于一个区域；
⒉一个区域只有一个区域主管；
⒊一个仓库可以存放多种设备，每种设备可以存放在多个仓库中；
⒋每个仓库的每种设备都有一个库存数量。


### 幻灯片 8

7.1 问题的提出
⒈ 数据冗余太大
浪费大量的存储空间
⒉ 更新异常
更新代价大，可能导致数据不一致
⒊ 插入异常
该插的数据插不进去
⒋ 删除异常
不该删除的数据不得不删，造成某些数据丢失
存在的问题：


### 幻灯片 9

7.1 问题的提出
结论：
WAE关系模式不是一个好的模式。


### 幻灯片 10

7.1 问题的提出
 什么是一个好的模式？
    好的模式不会发生插入异常、删除异常、更新异常、数据冗余应尽可能少。

 问题的原因
    由于模式中的某些数据依赖引起的。

      解决方法
       通过分解关系模式来消除其中不合适的数据依赖。


### 幻灯片 11

7.1 问题的提出
分解成三个关系模式即可：
   W(仓库号，所在区域)；
   A(区域，区域主管)；
   WE(仓库号，设备号，数量)


### 幻灯片 12

7.1 问题的提出
用规范化理论改造关系模式，消除其中不合适的数据依赖。


### 幻灯片 13

第七章 关系数据库设计理论

7.1问题的提出——为什么要学习关系数据理论
7.2 基本概念
7.3 规范化
7.4 函数依赖的公理系统
7.5 模式分解


### 幻灯片 14

7.2 基本概念
规范化理论正是用来改造关系模式，通过分解关系模式来消除其中不合适的数据依赖，以解决插入异常、删除异常、更新异常和数据冗余等问题。


### 幻灯片 15

7.2 基本概念
7.2.1 函数依赖
定义7.1  设R(U)是一个属性集U上的关系模式，X和Y是U的子集。若对于R(U)的任意一个可能的关系r，对t1,t2 r，若t1[X]=t2[X]，则t1[Y]=t2[Y]则称X函数决定Y或Y函数依赖X，记作X→Y。


### 幻灯片 16

7.2 基本概念
7.2.1 函数依赖
定义7.1  设R(U)是一个属性集U上的关系模式，X和Y是U的子集。若对于R(U)的任意一个可能的关系r，对t1,t2 r，若t1[X]=t2[X]，则t1[Y]=t2[Y]则称X函数决定Y或Y函数依赖X，记作X→Y。
如：仓库号 所在区域 
    所在区域 区域主管
   （仓库号，设备号） 数量


### 幻灯片 17

7.2 基本概念
7.2.1 函数依赖
定义7.1  设R(U)是一个属性集U上的关系模式，X和Y是U的子集。若对于R(U)的任意一个可能的关系r，对t1,t2 r，若t1[X]=t2[X]，则t1[Y]=t2[Y]则称X函数决定Y或Y函数依赖X，记作X→Y。
如：仓库号 所在区域 
    所在区域 区域主管
   （仓库号，设备号） 数量
若X→Y，则称X为这个函数依赖的
决定因素。


### 幻灯片 18

7.2 基本概念
7.2.1 函数依赖
1. 函数依赖是语义范畴的概念，只能根据数据的语义来确定函数依赖。
 例：“区域主管→所在区域” 只有在不允许有同名人的条件下成立
2. 函数依赖不是指关系模式R的某个或某些关系实例满足的约束条件，而是指R的所有关系实例均要满足的约束条件。
3.函数依赖存在的时间无关性。
说明:


### 幻灯片 19

7.2 基本概念
7.2.1 函数依赖
函数依赖与属性间的联系类型有关
(1) 若属性X和Y之间有“一对一”的联系
       则：X → Y,Y → X,X ←→ Y
(2) 若属性X和Y之间有“多对一”的联系
       则：X → Y,但Y → X 
(3)若属性X和Y之间有“多对多”的联系
       则：X与Y之间不存在任何函数依赖

注：当确定函数依赖关系时,可从属性间的联系入手


### 幻灯片 20

7.2 基本概念
7.2.1 函数依赖
平凡函数依赖与非平凡函数依赖
定义7.2 在关系模式R(U)中，对于U的子集X和Y：
若X→Y，但Y  X，则称X→Y是非平凡函数依赖.
若X→Y，但Y  X，则称X→Y是平凡函数依赖.


### 幻灯片 21

7.2 基本概念
7.2.1 函数依赖
平凡函数依赖与非平凡函数依赖
定义7.2 在关系模式R(U)中，对于U的子集X和Y：
若X→Y，但Y  X，则称X→Y是非平凡函数依赖.
若X→Y，但Y  X，则称X→Y是平凡函数依赖.
例：在关系WAE中，
   非平凡函数依赖：（仓库号，设备号） 数量
   平凡函数依赖： （仓库号，设备号）仓库号
                  （仓库号，设备号）设备号
注：对任一关系模式，平凡函数依赖必然存在，则一般讨论非平凡函数依赖。


### 幻灯片 22

7.2 基本概念
7.2.1 函数依赖
完全函数依赖与部分函数依赖


### 幻灯片 23

7.2 基本概念
7.2.1 函数依赖
完全函数依赖与部分函数依赖


### 幻灯片 24

7.2 基本概念
7.2.1 函数依赖
传递函数依赖与直接函数依赖
如果Y→X， 即X←→Y，则Z对X直接函数依赖。


### 幻灯片 25

7.2 基本概念
7.2.1 函数依赖
传递函数依赖与直接函数依赖
如果Y→X， 即X←→Y，则Z对X直接函数依赖。
例：在关系WAE中有：
仓库号→所在区域，所在区域→区域主管
可得到传递函数依赖：仓库号 t 区域主管


### 幻灯片 26

7.2 基本概念
7.2.1 函数依赖（回顾）
1.函数依赖
2.平凡函数依赖与非平凡函数依赖
3.完全函数依赖与部分函数依赖
4.传递函数依赖


### 幻灯片 27

7.2 基本概念
7.2.2 码
定义7.5     设K为R<U,F>中的属性或属性组合。若K  F   U，则K称为R的一个侯选码。
        若关系模式R有多个候选码，则选定其中的一个作为主码。
主属性：包含在任何一个候选码中的属性
 非主属性：不包含在任何一个码中的属性  
  全码：整个属性组全是码


### 幻灯片 28

7.2 基本概念
7.2.2 码
例: 关系模式WAE中: WAE(仓库号，所在区域，区域主管，设备号，数量)
码： (仓库号, 设备号) 
 主属性:仓库号, 设备号
 非主属性: 所在区域、区域主管和数量


### 幻灯片 29

第七章 关系数据库设计理论

7.1问题的提出——为什么要学习关系数据理论
7.2 基本概念
7.3 规范化
7.4 函数依赖的公理系统
7.5 模式分解


### 幻灯片 30

7.3 规范化
范式是对关系数据库的规范化过程中为不同程度的规范化要求设立的不同标准。
范式是符合某一种级别的关系模式的集合。
关系数据库中的关系必须满足一定的要求。 满足不同程度要求的为不同范式。


### 幻灯片 31

7.3 规范化
各种范式之间存在联系：
5NF    4NF   BCNF   3NF    2NF    1NF 

某一关系模式R为第n范式，可简记为R∈nNF。

通过模式分解将一个低级范式的关系模式转换为若干个高级范式的关系模式的过程称作规范化。


### 幻灯片 32

7.3 规范化
7.3.1 第一范式（1NF）
定义7.7 满足最低要求的范式。
        如果一个关系模式R的所有属性都是不可分的基本数据项，则R∈1NF。
第一范式是对关系模式的最起码要求。
 不满足第一范式的数据库模式不能称为关系数据库。
 但满足第一范式的关系模式并不一定是一个好的关系模式。

**表格内容：**

学号 | 姓名 | 性别 | 联系方式 | 
 |  |  | 手机 | 固定电话
0022102 | 王雪莲 | 女 | 15812345678 | 68021234
 |  |  |  | 
R∈1NF


### 幻灯片 33

7.3 规范化
7.3.2 第二范式（2NF）
定义7.8  若关系模式R∈1NF，并且每一个非主属性都完全函数依赖于R的码，则R∈2NF。
即：消除非主属性对码的部分依赖
如果一个数据库模式中的每个关系模式都是第二范式的，则称此数据库模式属于第二范式的数据库模式。
 从1NF中消除非主属性对候选码的部分函数依赖,则获得2NF。


### 幻灯片 34

7.3 规范化
7.3.2 第二范式（2NF）
例: 关系模式WAE中: WAE(仓库号，所在区域，区域主管，设备号，数量)
码： (仓库号, 设备号) 
 主属性:仓库号, 设备号
 非主属性: 所在区域、区域主管和数量
函数依赖：


### 幻灯片 35

7.3 规范化
7.3.2 第二范式（2NF）
码为(仓库号, 设备号)
非主属性所在区域和区域主管部分函数依赖于码
WAE满足第一范式，但不满足第二范式。


### 幻灯片 36

7.3 规范化
7.3.2 第二范式（2NF）
解决方法：将WAE分解为两个关系模式，消除这些部分函数依赖：
    即： WE（仓库号，设备号，数量）
            WA（仓库号，所在区域，区域主管）
WE∈2NF, WA∈2NF


### 幻灯片 37

7.3 规范化
7.3.2 第二范式（2NF）
注：
采用投影分解法将一个1NF的关系分解为多个2NF的关系，可以在一定程度上减轻原1NF关系中存在的插入异常、删除异常、数据冗余度大、修改复杂等问题。
将一个1NF关系分解为多个2NF的关系，并不能完全消除关系模式中的各种异常情况和数据冗余。
如：
(1) 若某个区域刚刚设立还没有仓库，则所在区域和区域主管的值无法插入，造成插入异常。
(2) 有一定的数据冗余，当多个仓库处于同一个区域时，区域主管的值被多次存储。
(3) 若某区域要更换区域主管，则要逐一地修改该区域的所有区域主管记录，稍有不慎，就有可能漏改某些记录，造成更新异常。


### 幻灯片 38

7.3 规范化
7.3.3 第三范式（3NF）
如果一个数据库模式中的每个关系模式都是第三范式的，则称此数据库模式属于第三范式的数据库模式。
从2NF中消除非主属性对候选码的传递依赖,则获得3NF。
定义7.9  如果关系模式R∈2NF，且每个非主属性都不传递函数依赖于R的候选码，则称R属于第三范式，简称3NF，记作R∈3NF。
   即：消除非主属性对码的部分依赖和传递依赖


### 幻灯片 39

7.3 规范化
7.3.3 第三范式（3NF）
例: WE（仓库号，设备号，数量）
      WA（仓库号，所在区域，区域主管）


### 幻灯片 40

7.3 规范化
7.3.3 第三范式（3NF）
原因:区域主管传递依赖于码。
解决方法：将WA分解为两个关系模式，消除这些传递依赖：
    即： W（仓库号，所在区域）
              A（所在区域，区域主管）
W∈3NF, A∈3NF


### 幻灯片 41

7.3 规范化
7.3.3 第三范式（3NF）
注：
采用投影分解法将一个2NF的关系分解为多个3NF的关系，可以在一定程度上减轻原2NF关系中存在的插入异常、删除异常、数据冗余度大、修改复杂等问题。

将一个2NF关系分解为多个3NF的关系，并不能完全消除关系模式中的各种异常情况和数据冗余。表现在可能存在主属性对码的部分和传递依赖。


### 幻灯片 42

7.3 规范化
7.3.4  BC范式（BCNF）
BCNF范式是第三范式的改进形式，建立在第一范式的基础上，消除了主属性对码的部分和传递依赖。
定义7.10  设关系模式R∈1NF，若对于R的每个函数依赖X→Y，若Y不属于X，则X必含有候选码，那么R∈BCNF。
即：每一个决定因素（决定属性集）都包含码


### 幻灯片 43

7.3 规范化
7.3.4  BC范式（BCNF）
证明：BCNF  3NF
反证：若RBCNF， 但R3NF，则按3NF定义，一定有非主属性对码的传递依赖。
          于是存在：R的码X ，属性组Y，以及非主属性Z（Z  Y），使得XY， Y Z，YX成立。 
    由YZ，按BCNF定义，Y含有码，则是YX成立，这与YX矛盾。 
所以：R3NF。


### 幻灯片 44

7.3 规范化
7.3.4  BC范式（BCNF）
注意：
若R∈BCNF ，则R∈3NF
若R∈3NF ，则R不一定属于BCNF
若R∈BCNF 
 所有非主属性对每一个候选码都是完全函数依赖；
 所有主属性对每一个不包含它的候选码都是完全函数依赖；
 没有任何属性完全函数依赖于非码的任何一组属性。


### 幻灯片 45

7.3 规范化
7.3.4  BC范式（BCNF）
例1: Course（Cno, Creidt, Pcno）
函数依赖：
        Cno → Credit,  Cno →Pcno
 即：无部分依赖和传递依赖，且Cno是唯一决定因素
因此：
           Course ∈ 3NF，且Course ∈ BCNF
码： Cno 即为主属性，决定因素


### 幻灯片 46

7.3 规范化
7.3.4  BC范式（BCNF）
例2：在关系模式SCP（S, C, P）中，S表示学生，C表示课程， P表示名次。
说明：
      每一个学生选修每一门课程都有一个固定的名次：
                       
      每一门课程中每一名次只对应一个学生（假设没有相同名次的学生） ：
(S，C)→P
(C，P)→S


### 幻灯片 47

7.3 规范化
7.3.4  BC范式（BCNF）
候选码： (S，C) 和(C，P)
即：S，C和P都是主属性
决定因素： (S，C)和(C，P)
结论：
SCP∈BCNF
只有(S，C)和(C，P)决定因素且包含候选码，无其他决定因素
SCP∈3NF 
S、C、P都是主属性
无部分依赖和传递依赖


### 幻灯片 48

7.3 规范化
7.3.4  BC范式（BCNF）
例3：在关系模式WES(仓库号,设备号,职工号)中。
说明：
一个仓库可以有多个职工;
一个职工仅在一个仓库工作;
每个仓库一种设备仅由一名职工保管,但每名职工可以保管多种设备.
问:该关系的码?属于第几范式?
答:码: (仓库号,设备号) 
     属于3NF,但不属于BCNF
非BCNF的不良特性:某位职工刚分配到一个仓库工作，但尚未负责具体设备，这样的信息就无法插入。
职工号仓库号
(仓库号,设备号) 职工号


### 幻灯片 49

7.3 规范化
7.3.4  BC范式（BCNF）
练习1：
问：关系模式R中的属性全部是主属性,则R的必定是_____。
3NF


### 幻灯片 50

7.3 规范化
7.3.4  BC范式（BCNF）
练习2：
如下表所示的关系R，下列选项中关于该关系模式属于第几范式判断正确的是（   ）。






A、不是3NF      B、是3NF但不是2NF
C、是3NF但不是BCNF
D、是BCNF
D
任何一个二元关系必定属于基于函数依赖最高范式BCNF。


### 幻灯片 51

7.3 规范化
7.3.5 多值依赖与第四范式
例: 学校中某一门课程由多个教师讲授，他们使用相同的一套参考书。
即：关系模式Teaching(C, T, B)
 课程C、教师T 和 参考书B


### 幻灯片 52

7.3 规范化
7.3.5 多值依赖与第四范式
用二维表表示Teaching


### 幻灯片 53

7.3 规范化
7.3.5 多值依赖与第四范式
Teach具有唯一候选码(C, T, B)， 即全码
Teaching∈BCNF
存在的问题
  (1)数据冗余：有多少名任课教师，参考书就要存储多少次 ；
  (2)插入异常：当某一课程增加一名任课教师时，该课程有多少本参照书，就必须插入多少个元组；
(3) 删除异常：某一门课要去掉一本参考书，该课程有多少名教师，就必须删除多少个元组；
  (4) 修改异常：某一门课要修改一本参考书，该课程有多少名教师，就必须修改多少个元组。
产生原因：存在多值依赖


### 幻灯片 54

7.3 规范化
7.3.5 多值依赖与第四范式
定义7.11     设R(U)是属性集U上的一个关系模式。X、 Y、Z是U的子集，并且Z＝U－X－Y，多值依赖 X→→Y成立当且仅当对R的任一关系r，给定一对（x，z）值，则对应一组Y值，且这组值仅仅决定于X值而与Z值无关。
例：  Teaching（C, T, B）
         对于C的每一个值，T总有一组值与之对应，而与B的取值无关，则T多值依赖于C即：C→→T，且B也多值依赖于C即：C→→B。


### 幻灯片 55

7.3 规范化
7.3.5 多值依赖与第四范式
平凡多值依赖和非平凡的多值依赖
        若X→→Y，而Z＝φ，则称X→→Y为平凡的多值依赖；
        否则称X→→Y为非平凡的多值依赖。
如非平凡的多值依赖：CT，CB


### 幻灯片 56

7.3 规范化
7.3.5 多值依赖与第四范式
多值依赖的性质：
（1）对称性：
   即：若X→→Y，则X→→Z，其中Z＝U－X－Y
        多值依赖的对称性可以用完全二分图直观地表示出来。


### 幻灯片 57

7.3 规范化
7.3.5 多值依赖与第四范式
完全二分图描述多值依赖对称性


### 幻灯片 58

7.3 规范化
7.3.5 多值依赖与第四范式
多值依赖的性质：
（1）对称性：
   即：若X→→Y，则X→→Z，其中Z＝U－X－Y
        多值依赖的对称性可以用完全二分图直观地表示出来。
（2）传递性：
即：若X→→Y，Y→→Z， 则X→→Z － Y


### 幻灯片 59

7.3 规范化
7.3.5 多值依赖与第四范式
（5）函数依赖是多值依赖的特殊情况：
 		即：若X→Y，则X→→Y。
（3）合并性:
   若X→→Y，X→→Z，则 X→→Y Z。
（4）分解性:
    若X→→Y，X→→Z，则 X→→Y∩Z, 
                                         X→→Y－Z，
                                         X→→Z－Y。


### 幻灯片 60

7.3 规范化
7.3.5 多值依赖与第四范式
定义7.12  关系模式R∈1NF，如果对于R的每个非平凡多值依赖X→→Y（Y  X），X都含有候选码，则R∈4NF。
即：消除各属性间非平凡且非函数依赖的多值依赖。
允许出现函数依赖（非平凡多值依赖）
  允许出现平凡多值依赖
  如果R ∈ 4NF， 则R ∈ BCNF


### 幻灯片 61

7.3 规范化
7.3.5 多值依赖与第四范式
证明：4NF  BCNF
反证：若R4NF， 但RBCNF，则按BCNF定义，一定有一个决定因素不包含码。
    于是存在：XY， Y  X，且X中不含有码。 
        由于函数依赖是多值依赖的特殊情况，即：XY ，可得X→→Y （Y  X） ，按4NF定义，X一定含有码，则与X中不含有码矛盾。 
所以：RBCNF。


### 幻灯片 62

7.3 规范化
7.3.5 多值依赖与第四范式
存在非平凡的多值依赖C→→T，且C不是候选码，该关系模式的码是(C,T,B) ，即全码。
存在问题：数据冗余大，插入、删除、更新异常
解决方法：用投影分解法把Teach分解为如下两个关系模式：   CT(C, T) ∈ 4NF
                         CB(C, B) ∈ 4NF
    其中：C→→T， C→→B是平凡多值依赖


### 幻灯片 63

7.3 规范化
7.3.5 多值依赖与第四范式
函数依赖和多值依赖是两种非常重要的数据依赖
        若只考虑函数依赖，则BCNF为最高范式（但不是数据库模式设计的最高范式）；
        若考虑多值依赖，则4NF为最高范式；
        若消除了4NF中的连接依赖，可以得到更为规范化的5NF。


### 幻灯片 64

7.3 规范化
7.3.6 关系模式规范化
一个关系只要其分量都是不可分的数据项，它就是规范化的关系，但这只是最基本的规范化1NF。
规范化程度过低的关系不一定能够很好地描述现实世界，可能会存在插入异常、删除异常、修改复杂、数据冗余等问题。
一个低一级范式的关系模式，通过模式分解可以转换为若干个高一级范式的关系模式集合，这种过程就叫关系模式的规范化。


### 幻灯片 65

7.3 规范化
7.3.6 关系模式规范化
消除不合适的数据依赖;
采用“一事一地”的模式设计原则，使各关系模式达到某种程度的“分离”； 
让一个关系描述一个概念、一个实体或者实体间的一种联系;
若多于一个概念就把它“分离”出去；
所谓规范化实质上是概念的单一化。
规范化的基本思想


### 幻灯片 66

7.3 规范化
7.3.6 关系模式规范化
关系模式规范化的基本步骤
                          1NF
                	      ↓
消除决定因素     2NF
非码的非平凡      ↓
函数依赖              3NF
                	      ↓  	                                    
                               BCNF 
                	      ↓
               	     4NF
消除非主属性对码的部分函数依赖
消除非主属性对码的传递函数依赖
消除主属性对码的部分和传递函数依赖
消除非平凡且非函数依赖的多值依赖
不能说规范化程度越高的关系模式就越好；
在设计数据库模式结构时，必须对现实世界的实际情况和用户应用需求作进一步分析，确定一个合适的、能够反映现实世界的模式；
上面的规范化步骤可以在其中任何一步终止。
注意：


### 幻灯片 67

7.3 规范化
练习
给定关系模式和函数依赖集合，要求判断达到的最高范式。
步骤如下：
1.求出给定关系的函数依赖和候选码（可能不止一个）
2.根据码，写出主属性和非主属性。
3.判断是否满足第一范式(属性的值域是否可以分解）
4.判断是否满足第二范式(非主属性对码的部分函数依赖) 
7.判断是否满足第三范式(非主属性对码的传递函数依赖) 
6.判断是否满足BCNF范式(主属性对码的传递和部分函数依赖)


### 幻灯片 68

7.3 规范化
练习
练习1.  已知关系模式R<U,F>
    U={A,B,C,D}
    F={ABD, AC  BD, BC}
在函数依赖范围内该关系属于的最高范式是什么？


### 幻灯片 69

7.3 规范化
练习
解：1. 关系r的候选码为：AB和AC
练习1.  已知关系模式R<U,F>
    U={A,B,C,D}
    F={ABD, AC  BD, BC}
在函数依赖范围内该关系属于的最高范式是什么？
2.  主属性为：A、B、C
     非主属性为：D
3. 判断是否满足各个范式的要求：
    1)  R的所有的属性值域都不可再分，则r ∈ 1NF。
    2)  非主属性D不存在对任何码的部分函数依赖，则r ∈ 2NF。
    3)  非主属性D不存在对任何码的传递函数依赖，则r ∈3NF。
    4)  因为有函数依赖BC，而B不是关系R的码，则r不属于BCNF。
则： r ∈ 3NF


### 幻灯片 70

7.3 规范化
练习
练习2.  已知关系模式R<U,F>
    U={A,B,C,D,E,F}
    F={AB, C DF, ACE, DF}
在函数依赖范围内该关系属于的最高范式是什么？


### 幻灯片 71

7.3 规范化
练习
解：1. 关系r的候选码为：AC
练习2.  已知关系模式R<U,F>
    U={A,B,C,D,E,F}
    F={AB, C DF, ACE, DF}
在函数依赖范围内该关系属于的最高范式是什么？
2.  主属性为：A、C
     非主属性为：B、D、E、F
3. 判断是否满足各个范式的要求：
    1)  R的所有的属性值域都不可再分，则r ∈ 1NF。
    2) 由于存在函数依赖AB, C DF，而A和C均不是关系的码，存在非主属性B、D、F对码的部分函数依赖，则r不属于2NF。
则： r ∈ 1NF


### 幻灯片 72

7.3 规范化
练习
练习3.假设：某商业集团数据库中有一关系模式R如下：R (商店编号，商品编号，数量，部门编号，负责人)如果规定：
  (1) 每个商店的每种商品只在一个部门销售；(2) 每个商店的每个部门只有一个负责人；(3) 每个商店的每种商品只有一个库存数量。试回答下列问题：(1) 根据上述规定，写出关系模式R的基本函数依赖；(2) 找出关系模式R的候选码；(3) 试问关系模式R最高已经达到第几范式？为什么？(4) 如果R不属于3NF，请将R分解成3NF模式集


### 幻灯片 73

7.3 规范化
练习
(1)有三个函数依赖：
  (商店编号，商品编号) →部门编号
  (商店编号，部门编号) →负责人
  (商店编号，商品编号) →数量
(2) R的候选键: (商店编号，商品编号)
(3)因为R中存在着非主属性“负责人”对候选码 (商店编号、商品编号)的传递函数依赖，但无部分函数依赖，所以R属于2NF，R不属于3NF。
(4) 将R分解成：
  R1 (商店编号，商品编号，数量，部门编号)
  R2 (商店编号，部门编号，负责人)


### 幻灯片 74

本章小结
了解什么是一个不好的数据库模式，规范化理论的重要意义 ；
理解关系的形式化定义、数据依赖（包括函数依赖、多值依赖以及各种分类）、码、范式（1NF到4NF）等基本概念；
重点掌握范式的理解和应用，能够根据语义，完整写出关系模式的数据依赖集合，并分析该关系模式属于第几范式。

---

