# 数据库第2章 - 关系数据库 【超精简版】

## 一、关系数据模型三要素
1. **关系数据结构**：二维表
2. **关系操作集合**：集合操作方式
3. **关系完整性约束**：实体完整性、参照完整性、用户定义完整性

## 二、核心术语
- **关系**：二维表，由元组（行）和属性（列）组成
- **域**：属性的取值范围
- **笛卡儿积**：D1×D2×...×Dn的所有组合，基数为m1×m2×...×mn
- **候选码**：能唯一标识元组的属性组
- **主码**：选定的候选码
- **外码**：本关系的属性但是其他关系的主码

## 三、完整性约束
1. **实体完整性**：主属性不能取空值
2. **参照完整性**：外码要么为空，要么等于被参照关系的某个主码值
3. **用户定义完整性**：针对具体应用的约束（如：成绩0-100，性别只能'男'或'女'）

## 四、关系代数（8种运算）
### 传统集合运算（要求相容）
- **并（∪）**：R∪S，至少在R或S之一中的元组
- **差（-）**：R-S，属于R但不属于S的元组
- **交（∩）**：R∩S，同时在R和S中的元组
- **笛卡儿积（×）**：R×S，所有可能的组合

### 专门关系运算
- **选择（σ）**：σF(R)，选择满足条件的行（水平分割）
- **投影（π）**：πA(R)，选择指定的列（垂直分割，自动去重）
- **连接（⋈）**：
  - θ连接：满足条件的连接
  - 等值连接：θ为"="
  - **自然连接**：公共属性相等且去除重复列
  - 外连接：保留不匹配的元组（填NULL）
- **除法（÷）**：R÷S，用于"全部"类查询，x的象集包含S的投影

## 五、查询表达式
**一般形式**：`π属性列表(σ条件(关系1 ⋈ 关系2 ⋈ ... ⋈ 关系n))`

**步骤**：连接→选择→投影  
**特殊**：否定用差运算（-），全部用除法（÷）

## 六、关键记忆点
- 关系性质：原子性、同质性、行列无序、元组唯一
- 主属性≠主码（主属性包含在任一候选码中）
- 外码可为NULL，但不能是不存在的主码值
- 自然连接去重复列，等值连接不去
- 投影自动去重，选择不去重

