# 数据库第8章 - 数据库设计

> 整理自数据库期末复习PPT

---

## 第八章 数据库设计 - 物理设计.pptx


### 幻灯片 2

第八章    数据库设计
	8.1 数据库设计概述
	8.2 需求分析
	8.3 概念设计
        8.4 逻辑设计
        8.5 物理设计
        8.6 数据库实施、运行与维护


### 幻灯片 3

8.5 数据库设计的过程
8.2.5 物理设计阶段
什么是数据库的物理设计?
数据库在物理设备上的存储结构与存取方法称为数据库的物理结构，它依赖于给定的计算机系统。
为一个给定的逻辑数据模型选取一个最适合应用要求的物理结构的过程，就是数据库的物理设计。
设计数据库物理结构的准备工作：
 充分了解应用环境，详细分析要运行的事务，以获得选择数据库物理设计所需参数，特别是应用的处理频率和响应时间要求；
 充分了解所用RDBMS的内部特征，特别是系统提供的存取方法和存储结构。
有哪些存储结构（行存储，列存储，聚簇存储） ，如何选择。
有哪些索引（例如B+树索引，HASH索引等），如何建立索引。
熟悉外存设备的特性，如分块原则、块因子大小的规定、设备的I/O特性等。


### 幻灯片 4

说明：
不同的DBMS产品 ，物理环境、存取 方法和存储结构有 很大差别
能供设计人员使 用的设计变量、参 数范围很不相同 
没有通用的物理 设计方法，只能给 出一般的设计内容 和原则
8.5 数据库设计的过程
8.2.5 物理设计阶段


### 幻灯片 5

8.2 数据库设计的过程
8.2.5 物理设计阶段
数据库物理设计的步骤：
确定数据库的物理结构（存取方法和存储结构）
对物理结构进行评价（时间和空间效率）


### 幻灯片 6

8.2 数据库设计的过程
8.2.5 物理设计阶段
1. 确定数据库物理结构的内容
确定数据的存储结构
考虑因素：存取时间、存储空间利用率和维护代价等。
设计合适的存取路径
主要指确定如何建立索引
确定数据的存放位置
根据应用情况，将易变部分与稳定部分、存取频率较高部分与存取频率较低部分分开存放，以提高系统性能。
确定系统配置
DBMS产品一般都提供了一些系统配置变量和存储分配参数.


### 幻灯片 7

8.2 数据库设计的过程
8.2.5 物理设计阶段
评价内容：
对数据库物理设计过程中产生的多种方案对其时间效率、空间效率、维护代价和各种用户需求进行细致的评价，从中选择一个较优的方案作为数据库的物理结构。
评价方法：
定量估算各种方案的存储空间、存取时间以及维护代价；
对估算结果进行权衡、比较，选择出一个较优的合理的物理结构；
如果该结构不符合用户需求，则需要修改设计。
2.评价物理结构


### 幻灯片 8

小结
数据库的物理设计不是一劳永逸的，要根据应用的变化，及时收集设计信息，调整数据库的物理结构。
谢谢！

---

## 第八章 数据库设计 - 逻辑设计.pptx


### 幻灯片 2

第八章    数据库设计
	8.1 数据库设计概述
	8.2 需求分析
	8.3 概念设计
        8.4 逻辑设计
        8.5 物理设计
        8.6 数据库实施、运行与维护


### 幻灯片 3

8.4 数据库设计—逻辑设计阶段
逻辑结构设计的任务
概念结构是各种数据模型的共同基础；
为了能够用某一DBMS实现用户需求，还必须将概念结构设计好的E-R图进一步转化为相应的数据模型，这正是数据库逻辑结构设计所要完成的任务。


### 幻灯片 4

8.2 数据库设计的过程
8.2.4 逻辑设计阶段
8.4 数据库设计—逻辑设计阶段
逻辑结构设计的步骤
将概念结构转化为一般的关系模型；
将转化来的关系模型向特定DBMS支持下的数据模型转换；
对数据模型进行优化。


### 幻灯片 5

要解决的问题
如何将实体和实体之间的联系转换为关系模式；
如何确定这些关系模式的属性和码。
转换内容
转换原则
8.4 数据库设计—逻辑设计阶段
8.4.1 E-R图转化为关系数据模型


### 幻灯片 6

转换内容
E-R图由实体、实体的属性和实体之间的联系三个要素组成；
关系模型的逻辑结构是一组关系模式的集合；
将E-R图转换为关系模型：将实体、实体的属性和实体之间的联系转化为关系模式。
8.4 数据库设计—逻辑设计阶段
8.4.1 E-R图转化为关系数据模型


### 幻灯片 7

转换原则
⒈ 一个实体型转换为一个关系模式：
关系的属性：实体型的属性
关系的码：实体型的码
8.4 数据库设计—逻辑设计阶段
8.4.1 E-R图转化为关系数据模型


### 幻灯片 8

8.4 数据库设计—逻辑设计阶段
【例】按照上述原则，教务管理系统中的实体可以转换为下列关系模型：

学院（学院编号，学院名）
专业（专业号，专业名）
班级（班级号，班级名）
学生（学号，姓名，性别，出生日期）
课程（课程号，课程名）
教师（工号，姓名，性别，职称）
负责人（工号，姓名，性别）
8.4.1 E-R图转化为关系数据模型


### 幻灯片 9

2. 一个1:1联系可转换为一个独立的关系模式也可以与任意一端对应的关系模式合并：
转换为一个独立的关系模式：
关系的属性：与该联系相连的各实体的码以及联系本身的属性
关系的码：每个实体的码均是该关系的候选码
与某一端对应的关系模式合并：
关系的属性：在该关系模式中加入对应关系的码和联系本身的属性
关系的码：不变
8.4 数据库设计—逻辑设计阶段
8.4.1 E-R图转化为关系数据模型


### 幻灯片 10

例：“负责”联系为1:1联系，可以有三种转换方法：
（1）转换为一个独立的关系模式：
     		负责（学院编号，工号）
        或              负责（学院编号，工号）

（2）“负责”联系与系关系模式合并，则只需在系关系中加入负责人关系的码，即职工号：
　　	系：（学院编号，系名，工号）

（3）“负责”联系与负责人关系模式合并，则只需在负责人关系中加入学院关系的码，即学院编号：
	      负责人：（工号，姓名，性别，学院编号）
8.4 数据库设计—逻辑设计阶段
8.4.1 E-R图转化为关系数据模型


### 幻灯片 11

注意：
从理论上讲，1:1联系可以与任意一端对应的关系模式合并。
但在一些情况下，与不同的关系模式合并效率会大不一样。因此究竟应该与哪端的关系模式合并需要依应用的具体情况而定。
   原因：由于连接操作是最费时的操作，所以一般应以尽量减少连接操作为目标。
  例如：如果经常要查询某个学院的负责人姓名，则将“负责”联系与“学院”关系合并更好些。
8.4 数据库设计—逻辑设计阶段
8.4.1 E-R图转化为关系数据模型


### 幻灯片 12

3. 一个1:n联系可转换为一个独立的关系模式，也可以与n端对应的关系模式合并：
转换为一个独立的关系模式：
关系的属性：与该联系相连的各实体的码以及联系本身的属性
关系的码：n端实体的码
与n端对应的关系模式合并：
关系的属性：在n端关系模式中加入1端关系的码和联系本身的属性
关系的码：不变
8.4 数据库设计—逻辑设计阶段
8.4.1 E-R图转化为关系数据模型


### 幻灯片 13

【例】“开设”联系为1:n（学院:专业）联系，可以有两种转换方法：
（1）转换为一个独立的关系模式：
     		开设（学院编号，专业号）

（2）将其与专业关系模式合并：
		专业（专业号，专业名，学院编号）
8.4 数据库设计—逻辑设计阶段
8.4.1 E-R图转化为关系数据模型


### 幻灯片 14

4. 一个m:n联系可转换为一个关系模式：
关系的属性：与该联系相连的各实体的码以及联系本身的属性
关系的码：各实体码的组合
【例】“选修”联系是一个m:n联系，可以将它转换为如下关系模式，其中学号与课程号为关系的组合码：
　　选修（学号，课程号，成绩）
8.4 数据库设计—逻辑设计阶段
选修
8.4.1 E-R图转化为关系数据模型


### 幻灯片 15

5. 三个或三个以上实体间的一个多元联系可转换为一个关系模式：
关系的属性：与该多元联系相连的各实体的码以及联系本身的属性
关系的码：各实体码的组合
供应（供应商号，项目号，零件号，数量）
8.4 数据库设计—逻辑设计阶段
8.4.1 E-R图转化为关系数据模型


### 幻灯片 16

6. 具有相同码的关系模式可合并
目的：减少系统中的关系个数
合并方法：将其中一个关系模式的全部属性加入到另一个关系模式中，然后去掉其中的同义属性（可能同名也可能不同名），并适当调整属性的次序。
【例】关系模式：
开设（系号，专业号）
专业（专业号，专业名）
专业（专业号，专业名，系号）
8.4 数据库设计—逻辑设计阶段
8.4.1 E-R图转化为关系数据模型


### 幻灯片 17

7个实体
7个联系：
1个1:1联系
4个1:n联系
2个m:n联系。
m                n               n                  1                 1

                                                              1                       1

m


                                                               n


                                                              1
            n


                                                             n
                                       n               1
按照上述原则，教务管理系统中的实体和联系可以转换为下列关系模型：

系（系号，系名）
专业（专业号，专业名，系号）
　    [系:专业的1:n(开设)]
班级（班级号，班级名，专业号）
　    [专业:班级的1:n(拥有)]
学生（学号，姓名，性别，出生日期，班号）
　    [班级:学生的1:n(包含)]
课程（课程号，课程名）
 教师（工号，姓名，性别，职称，系号）
　    [系:教师的1:n(属于)]
选修（学号，课号，成绩）
　    [学生:课程的m:n(选修)]
讲授（工号，课程号）
　　 [教师:课程的m:n(讲授)]
负责人（工号，姓名，性别，系号）
　    [系:负责人的1:1(负责)]
8.4 数据库设计—逻辑设计阶段
8.4.1 E-R图转化为关系数据模型


### 幻灯片 18

数据库逻辑设计的结果不是唯一的。
得到初步数据模型后，还应该适当地修改、调整数据模型的结构，以进一步提高数据库应用系统的性能，这就是数据模型的优化。
关系数据模型的优化通常以规范化理论为指导。
为什么要进行关系模式优化
8.4 数据库设计—逻辑设计阶段
8.4.2 关系模式优化


### 幻灯片 19

关系模式优化的步骤
⒈ 确定数据依赖：按需求分析阶段所得到的语义，分别写出每个关系模式内部各属性之间的数据依赖以及不同关系模式属性之间的数据依赖。
⒉ 对于各个关系模式之间的数据依赖进行极小化处理，消除冗余的联系。
⒊ 按照数据依赖的理论对关系模式逐一进行分析，考查是否存在部分函数依赖、传递函数依赖、多值依赖等，确定各关系模式分别属于第几范式。
8.4 数据库设计—逻辑设计阶段
8.4.2 关系模式优化


### 幻灯片 20

【例】 在关系模式
 工资（工号，姓名，基本工资，岗位补贴，应发工资，五险一金，实发工资）
 中存在下列函数依赖：
工号→姓名，基本工资，岗位工资
(基本工资，岗位工资)→应发工资， 
应发工资→五险一金
应发工资，五险一金→实发工资
显然有：工号→应发工资，五险一金，实发工资
      因此该关系模式中存在传递函数依赖，是2NF关系。
8.4 数据库设计—逻辑设计阶段
8.4.2 关系模式优化


### 幻灯片 21

注意：并不是规范化程度越高的关系就越优。
当一个应用的查询中经常涉及到两个或多个关系模式的属性时，系统必须经常地进行联接运算，而联系运算的代价是相当高的，可以说关系模型低效的主要原因就是做联接运算引起的，因此在这种情况下，第二范式甚至第一范式也许是最好的。
非BCNF的关系模式虽然从理论上分析会存在不同程度的更新异常，但如果在实际应用中对此关系模式只是查询，并不执行或很少执行更新操作，则就不会产生实际影响。
对于一个具体应用来说，到底规范化进行到什么程度，需要权衡响应时间和潜在问题两者的利弊才能决定。
8.4 数据库设计—逻辑设计阶段
8.4.2 关系模式优化


### 幻灯片 22

【例】 在关系模式
 工资（工号，姓名，基本工资，岗位补贴，应发工资，五险一金，实发工资）
 中存在下列函数依赖：
工号→姓名，基本工资，岗位工资
(基本工资，岗位工资)→应发工资， 
应发工资→五险一金
应发工资，五险一金→实发工资
显然有：工号→应发工资，五险一金，实发工资
      因此该关系模式中存在传递函数依赖，是2NF关系。
虽然应发工资，五险一金，实发工资可以由其他属性推算出来，但如果应用中需要经常查询职工的这些工资项，为提高效率，仍然可保留该冗余数据，对关系模式不再做进一步分解。
一种更好的方法是把冗余数据定义在视图中。
8.4 数据库设计—逻辑设计阶段
8.4.2 关系模式优化


### 幻灯片 23

⒌  对关系模式进行必要的分解，以提高数据操作的效率和存储空间的利用率。
水平分解：把(基本)关系的元组分为若干子集合，定义每个子集合为一个子关系，以提高系统的效率。
垂直分解：把关系模式R的属性分解为若干子集合，形成若干子关系模式。
8.4 数据库设计—逻辑设计阶段
⒋ 按照需求分析阶段得到的各种应用对数据处理的要求，分析对于这样的应用环境这些模式是否合适，确定是否要对它们进行合并或分解。
8.4.2 关系模式优化


### 幻灯片 24

水平分解适用范围：
满足“80/20原则”的应用：一个大关系中，经常被使用的数据只是关系的一部分，约20%，把经常使用的数据分解出来，形成一个子关系，可以减少查询的数据量。
【例】某网站注册用户：用户(用户ID，用户名，…)
 用户情况：只有少部分是活跃用户，其他用户都很少登录甚至从不登录。
 水平分割：1.活跃用户（……）  2.非活跃用户（……）
并发事务经常存取不相交的数据：如果关系R上具有n个事务，而且多数事务存取的数据不相交，则R可分解为少于或等于n个子关系，使每个事务存取的数据对应一个关系。
【例】某大学学生信息表：学生(学号，姓名，出生年月，…)
事实情况：多数查询一次仅涉及其中一类学生。
水平分割：1.本科生(…)    2.硕士生(…)     3.博士生(…)
8.4 数据库设计—逻辑设计阶段
8.4.2 关系模式优化


### 幻灯片 25

垂直分解
适用范围：取决于分解后R上的所有事务的总效率是否得到了提高。
原则：垂直分解必须保持无损连接性和保持函数依赖。
优点：减少数据传递量，提高查询速度。
【例】学生情况的关系模式 学生(学号,姓名,性别,出生年月, 专业班级，家庭住址,联系方式，家庭联系人)事实情况：经常查询前五项，较少使用后三项。
垂直模式分解:1. Student1(学号,姓名,性别,出生年月,专业班级)2. Student2(学号,家庭住址,联系方式，家庭联系人)
8.4 数据库设计—逻辑设计阶段
8.4.2 关系模式优化
一个表中的字段同时存在经常查询和非经常查询的属性，均可采用垂直分割的方法


### 幻灯片 26

定义数据库模式主要是从系统的时间效率、空间效率、易维护等角度出发。
定义用户外模式时应该更注重考虑用户的习惯与方便。包括三个方面：
8.4 数据库设计—逻辑设计阶段
(1)使用更符合用户习惯的别名
【例】负责学籍管理的用户习惯于称教师模式的工号为教师编号。因此可以定义视图，在视图中职工号重定义为教师编号。
8.4.3 设计用户子模式


### 幻灯片 27

(2)针对不同级别的用户定义不同的外模式，以满足系统对安全性的要求。
【例】关系模式：学生(学号、姓名、性别、出生日期、班级、入学年份、家庭住址)
   教务管理系统只能查询学生的学号、姓名、性别、班级、入学年份；
       定义外模式(视图)：学生_教务系统（学号、姓名、性别、班级、入学年份）
   
(3)简化用户对系统的使用
        如果某些局部应用中经常要使用某些很复杂的查询，为了方便用户，可以将这些复杂查询定义为视图。
8.4 数据库设计—逻辑设计阶段
8.4.3 设计用户子模式
这样就可以防止用户非法访问本来不允许他们查询的数据，保证了系统的安全性。


### 幻灯片 28

小结
本小节介绍数据库的逻辑设计，主要内容包括E-R图向关系模型的转换、关系模式的优化、设计外模式等内容。
谢谢观看！

---

## 第八章 数据库设计 -概念设计.pptx


### 幻灯片 2

第八章    数据库设计
	8.1 数据库设计概述
	8.2 需求分析
	8.3 概念设计
        8.4 逻辑设计
        8.5 物理设计
        8.6 数据库实施、运行与维护


### 幻灯片 3

8.3 数据库设计—概念设计阶段
在进行数据库设计时，通常先将现实世界中的客观对象首先抽象为不依赖任何具体机器的信息结构，这种结构不是DBMS支持的数据模型，而是概念模型（概念结构设计）。然后再把概念模型转换成具体机器上DBMS支持的数据模型。
概念模型是一个过渡的中间层次
8.3.1 概念设计的任务


### 幻灯片 4

8.3 数据库设计—概念设计阶段
概念结构是各种数据模型的共同基础，它比数据模型更独立于机器、更抽象，从而更加稳定。
概念结构设计：将需求分析得到的用户需求抽象为信息结构即概念模型的过程。
概念结构设计的特点：
能真实、充分地反映现实世界；
易于理解；
易于更改；
易于向关系模型等各种数据模型转换。
描述工具：实体（Entity）-联系(Relation)模型（E-R模型）
8.3.1 概念设计的任务


### 幻灯片 5

(1)实体：现实世界中客观存在并可相互区别的事物。
(2)属性：实体所具有的某一特性称为属性。 
(3)码（key）：唯一表示实体的属性集称为码。
(4)域（Domain）：属性的取值范围。
(5)实体集：具有相同特征或能用同样特征描述的实体集合。
(6)实体型：具有相同属性的实体必然具有共同的特征和性质。用实体名及其属性名集合来抽象和刻画同类实体，称为实体型。
例如：员工（员工编号、姓名、部门、性别、年龄、职称）就是一个实体型。
8.3 数据库设计—概念设计阶段
8.3.2 实体-联系模型（E-R模型）
基本概念


### 幻灯片 6

(7)联系：
实体内部的联系：组成实体的各属性之间的联系（如：学号－姓名）。
实体之间的联系：不同实体集之间的联系。
    两个实体型之间的联系可分为三类：
1对1联系(1:1)
1对多联系(1:n)
多对多联系(m:n)
8.3 数据库设计—概念设计阶段
8.3.2 实体-联系模型（E-R模型）
基本概念


### 幻灯片 7

1对1联系：
若对于实体集A中的每一个实体，实体集B中至多有一个实体与之联系，反之亦然，则称实体集A与实体集B具有一对一联系，记为1:1。
8.3 数据库设计—概念设计阶段
8.3.2 实体-联系模型（E-R模型）
基本概念
【例】 部门---负责人之间关系


### 幻灯片 8

1对多联系 
若对于实体集A中的每一个实体，实体集B中有n个实体(n≥0)与之联系，反之，对于实体集B中的每一个实体，实体集A中至多只有一个实体与之联系，则称实体集A与实体集B具有一对多联系，记为1:n。
8.3 数据库设计—概念设计阶段
8.3.2 实体-联系模型（E-R模型）
【例】部门—员工之间关系
基本概念


### 幻灯片 9

多对多联系:
若对于实体集A中的每一个实体，实体集B中有n个实体(n≥0)与之联系，反之，对于对于实体集B中的每一个实体，实体集A中也有m个实体(m≥0)与之联系，则称实体集A与实体集B具有多对多联系，记为m:n。
8.3 数据库设计—概念设计阶段
8.3.2 实体-联系模型（E-R模型）
基本概念
【例】学生—课程之间关系


### 幻灯片 10

同一实体集内的各实体之间也存在着一对一、一对多和多对多的联系.
同一实体集内一对多联系
同一实体集内一对一联系
8.3 数据库设计—概念设计阶段
8.3.2 实体-联系模型（E-R模型）
基本概念


### 幻灯片 11

一般地，两个以上实体型之间也存在着一对一、一对多和多对多的联系.
8.3 数据库设计—概念设计阶段
8.3.2 实体-联系模型（E-R模型）
基本概念


### 幻灯片 12

（8）弱实体集：
    在描述实体的过程中，有些实体集的属性可能不足以形成主码，需要依赖其他实体集中的部分属性。这样的实体集叫做弱实体集，不需要依赖其他的实体的实体集称为强实体集。
    例如一个单位的员工实体集Employee与工作履历实体集Career，则工作履历实体集Career是以职工存在为前提的，即工作履历实体集Career是弱实体集。
8.3 数据库设计—概念设计阶段
8.3.2 实体-联系模型（E-R模型）
基本概念
员工
工作履历
有
1                                  m


### 幻灯片 13

E-R图设计
用E-R图来描述现实世界的概念模型。
E-R图提供了表示实体集、属性和联系的方法。
属性名
椭圆形表示属性，键值属性加下划线
菱形表示联系
连接实体型与联系类型，也可用于表示实体与属性的联系并注明种类。
注：用虚边矩形和虚边菱形分别表示弱实体和弱实体之间的联系。
8.3 数据库设计—概念设计阶段
8.3.2 实体-联系模型（E-R模型）
性别
姓名
课名
专业
学分


### 幻灯片 14

确定实体类型：几个实体类型及相应的实体名
  确定联系类型：各实体类型之间是否有联系，是何种联系类型及相应的联系名.
  连接实体类型和联系类型，组合成E-R图
  确定实体类型和联系类型的属性
  确定实体类型的码
8.3 数据库设计—概念设计阶段
8.3.2 实体-联系模型（E-R模型）
E-R图设计


### 幻灯片 15

【例】学生选修课程
学生
课程
选修
成绩
用矩形表
示实体
用椭圆表示实体的属性
用无向边把实体与其属性连接起来
用菱形表示实体间的联系
实体与联系用线段连接并注明类型
m
n
8.3 数据库设计—概念设计阶段
8.3.2 实体-联系模型（E-R模型）


### 幻灯片 16

【例】为仓库管理设计一个E-R模型，该仓库主要管理零件的入库、出库和采购等事项；仓库根据需要向外面厂家（供应商）订购零件，而许多工程项目需要仓库供应零件；一个仓库有多个保管员。

实体有：
仓库：属性有仓库号、仓库面积、电话号码。
零件：属性有零件号、名称、规格、单价、描述。
供应商：属性有供应商编号、姓名、地址、电话号码、帐号。
项目：属性有项目号、预算、开工日期。
职工：属性有职工号、姓名、年龄、职称。
8.3 数据库设计—概念设计阶段
8.3.2 实体-联系模型（E-R模型）


### 幻灯片 17

实体之间的联系如下：
一个仓库可以存放多种零件，一种零件可以存放在多个仓库中，某种零件在某个仓库中的数量用库存量描述。
仓库:零件－ m : n
仓库:职工－1:n
职工实体集之间－1:n
供应商:项目:零件－ m : n :p
一个仓库有多个职工当仓库保管员，一个职工只能在一个仓库工作。
职工之间具有领导被领导的关系，即仓库主任领导若干保管员。
一个供应商可以供给若干项目多种零件，每个项目可以使用不同供应商供应的零件，每种零件可由不同供应商供给。
8.3 数据库设计—概念设计阶段
8.3.2 实体-联系模型（E-R模型）


### 幻灯片 18

仓库管理E-R图
8.3 数据库设计—概念设计阶段
8.3.2 实体-联系模型（E-R模型）


### 幻灯片 19

如果某个部门的概念模型中涉及的实体和实体属性较多，可以把实体及其属性在另一个图上画出。














仓库管理实体及其属性图
8.3 数据库设计—概念设计阶段
8.3.2 实体-联系模型（E-R模型）


### 幻灯片 20

【例】某电力公司的配电物资存放在仓库中，假设一个仓库可以存放多种物资，一种配电物资只能存放在一个仓库中；一个配电抢修工程可能需要多种配电物资，一种配电物资可以应用到多个抢修工程中。仓库包含仓库编号、仓库名称、仓库负责人等属性，配电物资包含物资编号、物资名称、单价、规格、数量等属性，抢修工程包含工程编号、工程名称、工程开始日期、工程结束日期、工程状态（工程是否完工）等属性，某一抢修工程领取某配电物资时，必须标明领取数量、领取日期、领取部门。
8.3 数据库设计—概念设计阶段
8.3.2 实体-联系模型（E-R模型）


### 幻灯片 21

8.3 数据库设计—概念设计阶段
8.3.2 实体-联系模型（E-R模型）


### 幻灯片 22

【例】某工厂有若干车间及仓库，一个车间可以生产多种零件，每种零件只能在一个车间生产，一种零件可以组装在不同产品中，一种产品需要多种零件，每种零件和产品都只能存放在一个仓库中；车间有工人，工人有家属。
各实体的属性为：
车间：车间名、负责人、电话；
工人：工号、姓名、出生年月、性别、工种；　
工厂：工厂名、法人代表、地址；
产品：产品号、产品名；
零件：零件号、零件名，规格；
仓库：仓库名、负责人、电话；
家属：姓名、亲属关系。
8.3 数据库设计—概念设计阶段
8.3.2 实体-联系模型


### 幻灯片 23

1                             m                     1                             m

                1                                                       1                                                    1

                m                                                     m                                                 
                               1                              n


                  1                                                      m
                                       n                    n
8.3 数据库设计—概念设计阶段
8.3.2 实体-联系模型
工厂
车间
工人
仓库
零件
产品
家属
从属
从属
存放
组装
生产
隶属
有
存放
实体-联系图


### 幻灯片 24

8.3 数据库设计—概念设计阶段
8.3.2 实体-联系模型（E-R模型）
实体-属性图


### 幻灯片 25

【例】某学校有若干名教师和学生，并且教师和学生不能跨系；每个教师可以教授若干门课程，每门课程只能由一个教师任课；每个学生可以同时选修多门课程。请设计某学校的教学管理的E-R模型。
其中实体有：系、教师、学生、课程。
系属性有：系编号、系名、系主任。
教师属性有：教师编号、教师姓名、职称。
学生属性有：学号、姓名、性别、班号。
课程属性有：课程编号、课程名、学分。
8.3 数据库设计—概念设计阶段
8.3.2 实体-联系模型


### 幻灯片 26

系
学生
课程
教师
系编号
系主任
系名
教师编号
职称
教师姓名
学号
性别
姓名
课程号
学分
课程名
选修
从属
任课
从属
1
m
m
n
m
1
m
1
班号
学时
成绩
8.3 数据库设计—概念设计阶段
8.3.2 实体-联系模型


### 幻灯片 27

设计方法：
自顶向下：首先定义全局概念结构的框架，然后逐步细化。
8.3 数据库设计—概念设计阶段
8.3.3 概念结构设计的步骤与方法


### 幻灯片 28

自底向上：首先定义各局部应用的概念结构，然后将它们集成起来，得到全局概念结构
8.2 数据库设计—概念设计阶段
8.3.3 概念结构设计的步骤与方法


### 幻灯片 29

逐步扩张：首先定义最重要的核心概念结构，然后向外扩充，以滚雪球的方式逐步生成其他概念结构，直至总体概念结构。
8.2 数据库设计—概念设计阶段
8.3.3 概念结构设计的步骤与方法


### 幻灯片 30

混合策略：将自顶向下和自底向上相结合，用自顶向下策略设计一个全局概念结构的框架，以它为骨架集成由自底向上策略中设计的各局部概念结构。
常用策略：
自顶向下地进行需求分析
自底向上地设计概念结构
8.2 数据库设计—概念设计阶段
8.3.3 概念结构设计的步骤与方法


### 幻灯片 31

需求分析
自顶向下
概念结构设计
自底向上
8.2 数据库设计—概念设计阶段
8.3.3 概念结构设计的步骤与方法


### 幻灯片 32

自底向上概念结构设计步骤：
第1步：抽象数据并设计局部视图
第2步：集成局部视图，得到全局概念结构
8.2 数据库设计—概念设计阶段
8.3.3 概念结构设计的步骤与方法


### 幻灯片 33

1）选择局部E-R图的描述范围
需求分析阶段，已用多层数据流图和数据字典描述了整个系统。
设计分E-R图首先需要根据系统的具体情况，在多层的数据流图中选择一个适当层次的数据流图，让这组图中每一部分对应一个局部应用，然后以这一层次的数据流图为出发点，设计分E-R图。
通常以中层数据流图作为设计分E-R图的依据。原因：
高层数据流图只能反映系统的概貌；
中层数据流图能较好地反映系统中各局部应用的子系统组成；
低层数据流图过细描述整个系统。
第1步：局部E-R模型设计
8.2 数据库设计—概念设计阶段
8.3.3 概念结构设计的步骤与方法


### 幻灯片 34

8.2 数据库设计—概念设计阶段
2）画出局部E-R图
将各局部应用涉及的数据分别从数据字典中抽取出来，参照数据流图，标定各局部应用中的实体、实体的属性、标识实体的码，确定实体之间的联系及其类型（1:1，1:n，m:n）。
8.3.3 概念结构设计的步骤与方法


### 幻灯片 35

【例】 某校的教务管理系统中，分为学籍管理、选课管理和教师开课管理部分。
学籍管理语义：
（1）一个学院开设有多个专业，一个专业只能属于一个学院；
（2）一个专业有多个班级，一个班级只属于一个专业；
（3）一个班级有多个学生，一个学生只属于一个班级。
1                  m                  1                 m                   1                       m
8.2 数据库设计—概念设计阶段
8.3.3 概念结构设计的步骤与方法
学籍管理分ER图


### 幻灯片 36

选课管理语义：
（1）一个学院可以开设多门课程，不同学院开设的课程必须不同。
（2）一个学生可选修多门课程，一门课程可为多个学生选修；
8.2 数据库设计—概念设计阶段
8.3.3 概念结构设计的步骤与方法
学分
学院号
绩点
选课管理分ER图


### 幻灯片 37

教师开课管理语义：
（1）一个部门可有多名教师，一名教师只能属于一个部门；
（2）一个部门只有一个负责人；
（3）一名教师可讲授多门课程，一门课程可为多名教师讲授。
8.2 数据库设计—概念设计阶段
8.3.3 概念结构设计的步骤与方法
学时
教师开课管理分ER图


### 幻灯片 38

对局部概念模型进行合并，集成为一个整体的数据概念结构即总E-R图。
▼集成的两种方式：
１）多元集成法
通常用于局部视图比较简单时。
２）二元集成法
首先集成两个局部视图（通常是比较关键的两个局部视图）；以后每次将一个新的局部视图集成进来。
第2步：局部E-R模型的集成
8.2 数据库设计—概念设计阶段
8.3.3 概念结构设计的步骤与方法


### 幻灯片 39

▼集成局部E-R图步骤:
⒈  合并：解决各局部E-R图之间的冲突，将各分E –R图合并起来生成初步E-R图。
⒉  优化：消除不必要的冗余，生成全局E-R图。
8.2 数据库设计—概念设计阶段
8.3.3 概念结构设计的步骤与方法


### 幻灯片 40

（1） 合并局部E-R图，生成全局E-R图
各局部Ｅ-Ｒ图存在冲突
        各个局部应用所面向的问题不同且由不同的设计人员进行设计
各个局部E-R图之间必定会存在许多不一致的地方－－冲突

合并局部E-R图的主要工作与关键所在：合理消除各局部E-R图的冲突。
8.2 数据库设计—概念设计阶段
8.3.3 概念结构设计的步骤与方法


### 幻灯片 41

三种主要的冲突类型：
a.属性冲突
属性域冲突：属性值的类型、取值范围或取值集合不同。
属性取值单位冲突
解决方法：通常用讨论、协商等行政手段加以解决
8.2 数据库设计—概念设计阶段
8.3.3 概念结构设计的步骤与方法
【例】“课程”的属性中，选课管理中用“学分”属性，而在教师开课管理中则用“学时”属性，而学时和学分是互通的，统一用一种即可。


### 幻灯片 42

b.  命名冲突
同名异义：不同意义的对象在不同的局部应用中具有相同的名字。
异名同义（一义多名）：同一意义的对象在不同的局部应用中具有不同的名字。
解决方法：通常用讨论、协商等行政手段加以解决
注：命名冲突可能发生在属性级、实体级、联系级上，其中属性的命名冲突更为常见。
8.2 数据库设计—概念设计阶段
8.3.3 概念结构设计的步骤与方法
【例】学籍管理和选课管理中，都用实体“学院”，而在教师开课管理中，用了“部门”，其实“学院”和“部门”表示的是同一种实体，应该统一为“学院”。


### 幻灯片 43

c.  结构冲突
同一对象在不同应用中具有不同的抽象
【例】“专业”在学籍管理中被当作实体，而在选课管理中则被当作属性。
解决方法：通常是把属性变换为实体或把实体变换为属性，使同一对象具有相同的抽象。但变换时要遵循如下准则:
属性不能再具有需要描述的性质。即属性必须是不可分的数据项，不能再由另一些属性组成。
属性不能与其他实体具有联系。联系只发生在实体之间。
为了简化E-R图的处置，现实世界中的事物凡能够作为属性对待的，应尽量作为属性。
8.2 数据库设计—概念设计阶段
8.3.3 概念结构设计的步骤与方法


### 幻灯片 44

同一实体在不同分E-R图中所包含的属性不完全相同，或者属性的排列次序不完全相同。
产生原因：不同的局部应用关心的是该实体的不同侧面。
解决方法：使该实体的属性取各分E-R图中属性的并集，再适当调整属性的次序。
8.2 数据库设计—概念设计阶段
8.3.3 概念结构设计的步骤与方法


### 幻灯片 45

(a)学生选课管理系统
(b)学生学籍管理系统
(c)合并后
8.2 数据库设计—概念设计阶段
8.3.3 概念结构设计的步骤与方法


### 幻灯片 46

实体之间的联系在不同局部视图中呈现不同的类型
【例】实体E1与E2在局部应用A中是多对多联系，而在局部应用B中是一对多联系。
        在局部应用X中E1与E2发生联系，而在局部应用Y中E1、E2、E3三者之间有联系。
解决方法：根据应用语义对实体联系的类型进行综合或调整。
8.2 数据库设计—概念设计阶段
8.3.3 概念结构设计的步骤与方法


### 幻灯片 47

8.3 数据库设计—概念设计阶段
8.3.3 概念结构设计的步骤与方法


### 幻灯片 48

（2） 优化：消除不必要的冗余，设计全局E-R图
什么是冗余？

冗余的数据：是指可由基本数据导出的数据。
冗余的联系：是指可由其他联系导出的联系。
冗余数据和冗余联系容易破坏数据库的完整性，给数据库维护增加困难。
8.3 数据库设计—概念设计阶段
8.3.3 概念结构设计的步骤与方法


### 幻灯片 49

消除冗余的方法－分析方法
以数据字典和数据流图为依据，根据数据字典中关于数据项之间逻辑关系的说明来消除冗余。
8.3 数据库设计—概念设计阶段
8.3.3 概念结构设计的步骤与方法
【例】
“选课”联系中的绩点属性可以由成绩推算出来，属于冗余数据，可以去掉。

“学院”实体与“课程”实体之间的“开设”联系，可以由“学院”与“教师”实体之间的“属于”联系、“教师”与“课程”实体之间的“讲授”联系推导出来，所以属于冗余的联系。


### 幻灯片 50

8.3 数据库设计—概念设计阶段
8.3.3 概念结构设计的步骤与方法
【例】 某校的教务管理系统的全局ER图


### 幻灯片 51

8.3 数据库设计—概念设计阶段
8.3.3 概念结构设计的步骤与方法
【实例】电网设备抢修物资管理数据库设计
         在需求分析得到的数据流图和数据字典的基础上，可以得到各局部的ER模型。
局部E-R图（1）
局部E-R图（2）


### 幻灯片 52

8.3 数据库设计—概念设计阶段
8.3.3 概念结构设计的步骤与方法
【实例】电网设备抢修物资管理数据库设计
局部E-R图（4）
局部E-R图（3）


### 幻灯片 53

8.3 数据库设计—概念设计阶段
8.3.3 概念结构设计的步骤与方法
【实例】电网设备抢修物资管理数据库设计
不包括属性的全局E-R图


### 幻灯片 54

小结
实体联系（E-R）模型
概念设计的步骤和方法
谢谢观看！

---

## 第八章 数据库设计-实施、运行与维护.pptx


### 幻灯片 2

第八章    数据库设计
	8.1 数据库设计概述
	8.2 需求分析
	8.3 概念设计
        8.4 逻辑设计
        8.5 物理设计
        8.6 数据库实施、运行与维护


### 幻灯片 3

数据库实施的工作内容：
用DDL定义数据库结构；     2. 组织数据入库；
      3. 编制与调试应用程序；        4.数据库试运行。
8.6 数据库设计—实施、运行与维护
8.6.1 数据库实施


### 幻灯片 4

8.6 数据库设计—实施、运行与维护
8.6.1 数据库实施
第一步：定义数据库结构
1.create  table  stocks(
   mat_no  char(8) primary key,
  ……….check…….
);
………..
2.create view  view1(………);
…………
3.create index  ……..
………


### 幻灯片 5

8.6 数据库设计—实施、运行与维护
8.6.1 数据库实施
第二步：数据装载（ETL）
数据库结构建立好后，就可以向数据库中装载数据了。转载数据和应用程序的编码、调试是数据库实施阶段最主要的工作。
数据装载（ETL）方法：
人工方法：适用于小型系统
计算机辅助数据入库：适用于中大型系统


### 幻灯片 6

第三步：应用程序的设计、调试
8.6 数据库设计—实施、运行与维护
8.6.1 数据库实施
数据库应用程序的设计应与数据库设计同时进行。
在数据库实施阶段，当数据库结构建立好后，就可以开始编制与调试数据库的应用程序。调试应用程序时由于数据入库尚未完成，可先使用模拟数据。


### 幻灯片 7

8.6 数据库设计—实施、运行与维护
8.6.1 数据库实施
应用程序调试完成，并且已有一小部分数据入库后，就可以开始数据库的试运行。
数据库试运行也称为联合调试，其主要工作包括：
1) 功能测试：实际运行应用程序，执行对数据库的各种操作，测试应用程序的各种功能。
2) 性能测试：测试系统的性能指标，分析是否符合设计目标。
             如果结果不符合设计目标，则需要返回物理设计阶段， 调整物理结构，修改参数；有时甚至需要返回逻辑设计 阶段，调整逻辑结构。
第四步：数据库试运行


### 幻灯片 8

数据库实施过程中注意事项
组织数据分批分期入库，先输入小批量数据做调试使用，待试运行基本合格后，再大批量输入数据。
要首先调试运行DBMS的恢复功能，做好数据库的转储和恢复工作。
在数据库试运行阶段，系统还不稳定，硬、软件故障随时都可能发生；
系统的操作人员对新系统还不熟悉，误操作也不可避免；
8.6 数据库设计—实施、运行与维护
8.6.1 数据库实施


### 幻灯片 9

整理文档
在应用程序编制调试及试运行时，应该随时将发现的问题的解决方案记录下来，整理成文档，以备运行维护和改进时参考。
试运行成功后，还应编写测试报告、应用系统的技术说明书和使用说明书，在正式使用时一并交给用户。
完整的文档是应用系统的重要组成部分，这一点容易被忽略，应该引起设计人员的充分重视。
8.6 数据库设计—实施、运行与维护
8.6.1 数据库实施


### 幻灯片 10

在数据库运行阶段，对数据库经常性的维护工作主要是由DBA完成的，包括：
⒈数据库的转储和恢复
转储和恢复是系统正式运行后最重要的维护工作之一。
DBA要针对不同的应用要求制定不同的转储计划，定期对数据库和日志文件进行备份。
一旦发生介质故障，即利用数据库备份及日志文件备份，尽快将数据库恢复到某种一致性状态。
8.6 数据库设计—实施、运行与维护
8.6.2 数据库运行与维护


### 幻灯片 11

⒉ 数据库的安全性、完整性控制
DBA必须根据用户的实际需要授予不同的操作权限。
在数据库运行过程中，由于应用环境的变化，对安全性的要求也会发生变化，DBA需要根据实际情况修改原有的安全性控制。
由于应用环境的变化，数据库的完整性约束条件也会变化，也需要DBA不断修正，以满足用户要求。
8.6 数据库设计—实施、运行与维护
8.6.2 数据库运行与维护


### 幻灯片 12

⒊数据库性能的监督、分析和改进
在数据库运行过程中， DBA必须监督系统运行，对监测数据进行分析，找出改进系统性能的方法。
利用监测工具获取系统运行过程中一系列性能参数的值；
通过仔细分析这些数据，判断当前系统是否处于最佳运行状态；
如果不是，则需要通过调整某些参数来进一步改进数据库性能。
8.6 数据库设计—实施、运行与维护
8.6.2 数据库运行与维护


### 幻灯片 13

⒋数据库的重组织和重构造
1）数据库的重组织
重组织形式：
全部重组织
部分重组织（只对频繁增、删的表进行重组织）
重组织工作：按原设计要求重新安排存储位置、回收垃圾、减少指针链等，以提高系统性能。
重组织实质：不会修改原设计的逻辑和物理结构。
8.6 数据库设计—实施、运行与维护
8.6.2 数据库运行与维护


### 幻灯片 14

2）数据库的重构造
重构造工作：根据新环境调整数据库的模式和内模式，比如：增加新的数据项、改变数据项的类型、改变数据库的容量、增加或删除索引、修改完整性约束条件。
重构造实质：部分修改数据库的模式和内模式。
重构造局限：部分重构造。若变化太大，无法通过重构数据库来满足新的需求，或重构数据库 的代价太大，则表明现有数据库应用系统的生命周期 已经结束，应该重新设计新的数据库应用系统了。
8.6 数据库设计—实施、运行与维护
8.6.2 数据库运行与维护


### 幻灯片 15

本章小结
介绍数据库设计的方法和步骤；
讲解了数据库设计各个阶段的目标、方法和技术；
重点是概念结构的设计和逻辑结构的设计 
E-R模型的设计方法
实体型、属性和联系的概念  
实体型之间的一对一、一对多和多对多联系  
 把E-R模型转换为关系模型的方法
谢谢！

---

## 第八章 数据库设计-概述-需求分析.pptx


### 幻灯片 2

第八章    数据库设计
	8.1 数据库设计概述
	8.2 需求分析
	8.3 概念设计
        8.4 逻辑设计
        8.5 物理设计
        8.6 数据库实施、运行与维护


### 幻灯片 3

8.1 数据库设计概述
什么是数据库设计
数据库设计是指对于一个给定的应用环境，构造最优的数据库模式，建立数据库及其应用系统，使之能够有效地存储数据，满足各种用户的应用需求（信息要求和处理要求）。
8.1.1数据库设计的概念


### 幻灯片 4

8.1 数据库设计概述
数据库是信息系统的核心和基础
它把信息系统中大量的数据按一定的模型组织起来；
提供存储、维护、检索数据的功能；
使信息系统可以方便、及时、准确地从数据库中获得所需的信息。
数据库设计目标
为用户和各种应用系统提供一个信息基础设施和高效率的运行环境。
8.1.1数据库设计的概念


### 幻灯片 5

8.1 数据库设计概述
1. 系统分析和数据库设计人员
数据库设计的核心人员
自始至终参与数据库设计
其水平决定了数据库系统的质量
数据库设计的准备工作－选定参加设计的人员
2. 用户和DBA
在数据库设计中也是举足轻重的
主要参加需求分析和数据库的运行维护
积极参与带来的好处：
加速数据库设计
提高数据库设计的质量
3. 应用开发人员：在系统实施阶段参与，负责编制程序和准备软硬件环境
8.1.1 数据库设计的概念


### 幻灯片 6

8.1 数据库设计概述
结构（数据）设计和行为（处理）设计相结合
结构设计：设计数据库框架或数据库结构。针对给定的应用环境，进行数据库的关系模式或子模式的设计。包括数据库的概念设计、逻辑设计和物理设计。给出各应用程序共享的结构，是静态和稳定的，一经形成不易改变。
行为设计：设计应用程序、事务处理等。确定数据库用户的行为和动作，即通过应用程序来实现对数据库的操作。而用户的行为总是使数据库的内容发生变化，所以行为设计是动态的。
8.1.2 数据库设计的特点


### 幻灯片 7

8.1 数据库设计概述
传统的软件工程忽视对应用中数据语义的分析和抽象，只要有可能就尽量推迟数据结构设计的决策；
早期的数据库设计致力于数据模型和建模方法研究，忽视了对行为的设计。
早期数据库设计－结构和行为分离的设计
8.1.2数据库设计的特点


### 幻灯片 8

8.1 数据库设计概述
数据库建设的基本规律
三分技术，七分管理，十二分基础数据
管理：数据库建设项目管理、企业（应用部门）的业务管理
基础数据：收集、整理、组织和不断更新
8.1.2数据库设计的特点


### 幻灯片 9

8.1 数据库设计概述
1.直观设计法（早期方法）
设计质量与设计人员的经验和水平有直接关系；
缺乏科学理论和工程方法的支持，工程质量难以保证；
数据库运行一段时间后常常又不同程度地发现各种问题，增加了维护代价。
2.规范设计法
基本思想：过程迭代和逐步求精
典型方法：
新奥尔良方法
基于E-R模型的数据库设计方法
3NF（第三范式）的设计方法
3.计算机辅助设计法
Rational Rose
PowerDesigner
Oracle Designer
8.1.3数据库设计的方法


### 幻灯片 10

8.1 数据库设计概述
数据库设计六个阶段：
1.  需求分析阶段；
2.  概念设计阶段；
3.  逻辑设计阶段；
4.  物理设计阶段；
5.  数据库实施阶段；
6.  数据库运行和维护阶段。
8.1.4 数据库设计的步骤


### 幻灯片 11

需求分析阶段
了解并收集用户的需求
形成需求分析说明书

概念设计阶段
对用户需求进行综合、归纳与抽象
形成一个独立于DBMS的概念数据模型
形成数据库逻辑模式

逻辑设计阶段
将概念数据模型转化为某一DBMS所支持的数据模型
针对DBMS的特点对数据模型进行限制与优化 
建立必要的视图(View)，形成数据的外模式

物理设计阶段
为逻辑数据模型选择最适合应用环境的物理结构 
形成数据库内模式
8.1 数据库设计概述
8.1.4 数据库设计的步骤


### 幻灯片 12

数据库实现阶段
在实际的计算机系统中建立数据库的结构、载入数据、测试程序、对数据库系统进行试运行等
 
数据库的运行与维护阶段
数据库系统正式投入运行
由DBA来承担数据库系统的日常维护工作
8.1 数据库设计概述
8.1.4 数据库设计的步骤


### 幻灯片 13

8.1 数据库设计概述
Creat……
……
Main(    )
……
if……
then
……
end
概念
设计
逻辑
设计
物理设计
设计过程各个阶段的设计描述图
8.1.3数据库设计的步骤


### 幻灯片 14

小结
数据库设计基本概念
数据库设计的特点
数据库设计的方法
数据库设计的步骤
谢谢观看！


### 幻灯片 15

第七章    数据库设计
	8.1 数据库设计概述
	8.2 需求分析
	8.3 概念设计
        8.4 逻辑设计
        8.5 物理设计
        8.6 数据库实施、运行与维护


### 幻灯片 16

8.2 数据库设计—需求分析阶段
需求分析就是分析用户的需要与要求：
需求分析是设计数据库的起点；
需求分析的结果是否准确地反映了用户的实际要求，将直接影响到后面各个阶段的设计，并影响到设计结果是否合理和实用。
需求分析的任务：
通过详细调查现实世界要处理的对象（组织、部门、企业等），充分了解原系统（手工系统或计算机系统）工作概况，明确用户各种需求，在此基础上确定新系统的功能。
新系统必须充分考虑今后可能的扩充和改变，不能仅仅按当前应用需求来设计数据库。
8.2.1需求分析的任务


### 幻灯片 17

8.2 数据库设计—需求分析阶段
1. 调查分析用户活动
     调查组织机构情况，以及各部门的业务活动情况。
2. 收集和分析需求数据，确定系统边界
    在熟悉业务活动的基础上，协助用户明确对新系统的各种需求，包括用户的信息需求、处理需求、安全性和完整性需求等，并确定哪些功能由计算机或将来由计算机完成，哪些活动由人工完成。
3. 编写系统需求分析报告
     数据流图、功能模块图、数据字典等。
需求分析的步骤：
8.2.2 需求分析的步骤


### 幻灯片 18

8.2 数据库设计—需求分析阶段
需求分析的重点：“数据”和"处理"
1）信息要求：
  用户需要从数据库中获得信息的内容与性质；
  由用户的信息要求可以导出数据要求，即在数据库中需要存储哪些数据。
2）处理要求：
  对处理功能的要求；
  对处理响应时间的要求；
  对处理方式的要求(批处理 / 联机处理)。
3）安全性与完整性要求
8.2.2 需求分析的重点和难点


### 幻灯片 19

8.2 数据库设计—需求分析阶段
需求分析的难点：确定用户的最终需求
用户缺少计算机系统知识，开始时无法确定计算机究竟能为自己做什么，不能做什么，因此无法准确地表达自己的需求，他们所提出的需求往往不断地变化；
  设计人员缺少用户的专业知识，不易理解用户的真正需求，甚至误解用户的需求；
  新的硬、软件技术的出现也会使用户需求发生变化。
解决方法: 设计人员必须采用有效的方法，与用户不断深入地进行交流，才能逐步确定用户的实际需求。
8.2.2 需求分析的重点和难点


### 幻灯片 20

8.2 数据库设计—需求分析阶段
【实例】电网设备抢修物资管理数据库设计
            电网是一个设备资产密集型的电能传输网络，在整个国民经济中具有关键的地位，它在运行时不能瘫痪，这就意味着电网中众多的设备一旦开始工作，就必须连续不间断的运行。但是所有设备一旦长时间运行，由于外界环境的影响、设备设计制造的误差、设备长时间的工作等原因，都会使设备产生缺陷，这些缺陷如果不及时消除，就会影响整个设备的正常工作，甚至危及整个电网的安全运行。所以，在电力系统中设备抢修是一项很重要的工作。电力设备抢修总会涉及设备零部件的更换，所以在仓库中必须要对重要设备的常用零部件进行备货，以满足抢修所需。


### 幻灯片 21

8.2 数据库设计—需求分析阶段
【实例】电网设备抢修物资管理数据库设计
           每年初，各部门根据以往设备抢修的实际情况预计本年度所需的抢修物资种类和数量，上报电力物资部门，电力物资部门制定一个物资采购计划，然后依照物资采购计划采购物资，当物资到货后办理入库手续。
           当电网设备发生故障后，需要安排抢修，抢修前先制订抢修计划，抢修计划中包括项目名称、主要施工内容和计划领取的备品备件种类和数量。实际抢修时，大部分情况抢修所需的物资品种与数量和抢修计划相同，但也有例外。
           实际抢修物资领用时需先办理领用手续，填写的领料单包括领用物资的种类、数量、该物资用途等，然后才能实际领用物资。


### 幻灯片 22

8.2 数据库设计—需求分析阶段
【实例】电网设备抢修物资管理数据库设计
   【分析】根据以上用户提出的对数据库系统的需求，需求分析的主要任务是和用户反复沟通，了解用户在建设电力设备抢修管理系统时，需要数据库做什么。数据库主要用于存储数据，所以进行需求分析时，面对繁杂的用户需求叙述，必须紧紧抓住“数据存储”的关键，从中抽取出数据库的真正需求。分析方法采用数据流图的方法。


### 幻灯片 23

8.2 数据库设计—需求分析阶段
第一层数据流图


### 幻灯片 24

8.2 数据库设计—需求分析阶段
第二层数据流图


### 幻灯片 25

8.2 数据库设计—需求分析阶段
数据字典是各类数据描述的集合。
数据字典是进行详细的数据收集和数据分析所获得的主要结果。
数据字典用来说明或描述系统中数据的静态组成结构，是数据库系统中各类数据属性的清单，在数据库设计中占有很重要的地位。
数据字典在需求分析阶段建立，在数据库设计过程中不断修改、充实、完善。
数据字典的用途：
8.2.3 数据字典


### 幻灯片 26

8.2 数据库设计—需求分析阶段
数据项 
数据结构 
数据流 
数据存储 
处理过程
数据字典的内容：
数据字典通过对数据项和数据结构的定义来描述数据流、数据存储的逻辑内容。
8.2.3 数据字典


### 幻灯片 27

8.2 数据库设计—需求分析阶段
数据项是不可再分的数据单位。
数据项描述｛数据项名，数据项含义说明，别名，数据类型，长度，取值范围，取值含义，与其他数据项的逻辑关系｝
1. 数据项
数据项：以“物资编号”为例：
数据项名：　 物资编号
含义说明：   库存物资唯一标识每个项目
别名：　　   库存物资编号
类型：　　   字符型
长度：　　   4
取值范围： m001-m999
取值含义： 后3位按顺序编号。
8.2.3 数据字典


### 幻灯片 28

8.2 数据库设计—需求分析阶段
数据结构反映了数据之间的组合关系。
 可以由若干个数据项组成，也可以由若干个数据结构组成，或由若干个数据项和数据结构混合组成。
数据结构描述｛数据结构名，含义说明，组成:｛数据项或数据结构｝｝
2. 数据结构
数据结构 :    以“抢修物资”为例
数据结构名：抢修物资
含义说明：电网设备抢修物资管理系统的主体数据结构，定义了仓库中库存的抢
          修物资的有关信息。
组    成：物资编号，物资名称，物资规格，保存的仓库，库存数量，单价。
8.2.3 数据字典


### 幻灯片 29

8.2 数据库设计—需求分析阶段
3. 数据流
数据流是数据结构在系统内传输的路径。
 数据流描述｛数据流名，说明，数据流来源，数据流去向，组成:｛数据结构｝，平均流量，高峰期流量｝
数据流来源：说明该数据流来自哪个过程；
数据流去向：说明该数据流将到哪个过程去；
平均流量：在单位时间里的传输次数；
高峰期流量：在高峰时期的数据流量。
数据流:   “抢修物资领用单”可如下描述：
    数据流：　　抢修物资领用单
    说  明：　　抢修工程需要用到的抢修物资领用信息
    数据流来源：抢修计划
    数据流去向：抢修物资出库
8.2.3 数据字典


### 幻灯片 30

8.2 数据库设计—需求分析阶段
4. 数据存储
数据存储是数据结构停留或保存的地方，也是数据流的来源和去向之一。
数据存储描述｛数据存储名，说明，编号，输入的数据流 ，输出的数据流 ，组成:｛数据结构｝，数据量，存取频度，存取方式｝
数据存储:   “抢修物资库存信息”可如下描述：
  数据存储：　抢修物资库存记录表
  说  明：　　记录库存的抢修物资的基本情况
  数据量：　　每年3000张
  存取方式：　随机存取
8.2.3 数据字典


### 幻灯片 31

8.2 数据库设计—需求分析阶段
5. 处理过程
其具体处理逻辑一般用判定表或判定树来描述。
处理过程描述｛处理过程名，说明，输入:｛数据流｝，输出:｛数据流｝，处理:｛简要说明｝｝
处理过程: “制定抢修计划”可如下描述：
处理过程：制定抢修计划
说明：对已经发生或为了避免发生的电力系统故障，制定抢修计划。
输入：抢修工程数据
输出：抢修物资领用单
处理：当电力故障发生，或为了避免故障发生，需要抢修一些设备。原则上要求故障的抢修修时间在2小时内完成。
8.2.3 数据字典


### 幻灯片 32

小结
需求分析是数据库设计过程中的第一个环节，也是软件工程中的重要环节，需求分析的准确性直接影响着整个数据库设计的质量，是数据库设计能顺利进行的关键。
谢谢观看！

---

